import{r as l,z as E,N as j,d as P,A as z,B as G,o as x,l as g,e as F,w as H,T as N,C as b,q as a,b as A,v as B,m as I,F as D,p as T,D as S}from"./index-245d784e.js";import{a as J}from"./axios-28bc18a3.js";import{_ as O}from"./plugin-vueexport-helper-c27b6911.js";const V=""+new URL("stringData-4f6bc0b1.png",import.meta.url).href;function Q(){const m=l([]),d=l([]);async function _(){const{data:e}=await J.get(V);return e.split(/\n/).filter(t=>t.trim()!=="")}async function r(){return(await _()).map((n,t)=>({menuName:n,menuId:n+(t+1)}))}function u(e,n=5,{onlySingle:t}={}){e=JSON.parse(JSON.stringify(e));const o=[];for(;n>0;){if(e.length<=0)throw new Error("菜单剩余不足,取不到了");const c=Math.floor(Math.random()*e.length);o.find(k=>k.menuId===e[c].menuId)?n++:(o.push(e[c]),e=e.filter(k=>k.menuId!==e[c].menuId),n--)}return t&&h(e,o),o}function v(e,n){return e.reduce((t,o)=>(n.find(c=>c.menuId===o.menuId)||t.push(o),t),[])}function h(e,n){d.value=v(e,n)}const p=l([]);function i(e){const n=u(m.value,e);console.log("🚀 ~ file: useProcessDataHook.js:83 ~ initMenu ~ menuLevel1:",n),p.value=M(n,e)}function M(e,n){return e.map(t=>(t.children=u(m.value,n).map(o=>(o.parentId=t.menuId,o)),t.children.map(o=>{o.children=u(m.value,n).map(c=>(c.parentId=o.menuId,c))}),t)),e}function C(e,{parentList:n,onlySingle:t}={}){return n?n.reduce((o,c)=>{const k=u(d.value,e,{onlySingle:t}).map(L=>(L.parentId=c.menuId,L));return o.concat(k)},[]):u(d.value,e,{onlySingle:t})}return{allMenu:m,remainMenu:d,mapData:r,getRandomData:u,changeRemainMenu:h,menuTree:p,initMenu:i,createLevelDataList:C}}function U(){const m=["column","row"],d=[5,7,9],_=["column","row"],r=[!1,!0];function u(){const v=[];return d.forEach((h,p)=>{for(let i=0;i<2;i++){const M={num:h,thirdDirection:_[i],globDirection:m[i],isFirstShow:r[i]};v.push(M)}}),v}return{generateFirstTypeList:u}}const{generateFirstTypeList:K}=U(),W=K();console.log("🚀 ~ file: questionHook.ts:28 ~ firstTypeList:",W);const{allMenu:$,remainMenu:q,mapData:X,getRandomData:Y,changeRemainMenu:re,menuTree:ie,initMenu:ce,createLevelDataList:R}=Q();function Z(){const m=l(!1),d=l(!1),_=l(!1),r=l(!0),u=l(!1),v=l(!1),h=l([]),p=l([]),i=l([]),M=l([]),C=l([]),e=l([]);async function n(f=5,s=!1){j.start(),$.value=await X(),q.value=$.value,h.value=R(f),M.value=h.value,p.value=R(f,{parentList:h.value,onlySingle:s}),console.log("🚀 ~ file: menuHook.ts:46 ~ initMenu ~ menuLevel2List.value:",p.value);const w=R(f,{parentList:p.value,onlySingle:s});i.value=w.map(y=>(y.children=Y(q.value,f),y)),j.done(),console.log("🚀 ~ file: menuHook.ts:51 ~ initMenu ~ menuLevel3List.value:",i.value)}const t=E(()=>_.value?`flex-row ${d.value?"justify-center ":"justify-start"}`:`flex-col ${d.value?"items-center  pl-36":"items-start"}`);return{isHide:m,isGlobalColumn:d,isThirdColumn:_,isShowFirstMenu:r,isShowSecondMenu:u,isShowThirdMenu:v,thirdCenter:t,firstMenuClick:f=>{console.log("一级菜单点击"),m.value&&(r.value=!1),u.value=!0,v.value=!1,C.value=p.value.filter(s=>s.parentId===f.menuId)},secondMenuClick:f=>{m.value&&(r.value=!1,u.value=!1),v.value=!0,e.value=i.value.filter(s=>s.parentId===f.menuId),console.log("🚀 ~ file: menuHook.ts:90 ~ secondMenuClick ~ menuLevel3.value:",e.value)},selectClick:f=>{console.log("选中:",f)},refreshStatus:()=>{r.value=!0,u.value=!1,v.value=!1},initMenu:n,menuLevel1:M,menuLevel2:C,menuLevel3:e}}const ee=["onClick"],ne=["onClick"],te={class:"font-bold w-32 rounded-sm py-2 px-2"},se=["onClick"],oe=P({__name:"menu",setup(m){const d=z(),{isHide:_,isGlobalColumn:r,isThirdColumn:u,isShowFirstMenu:v,isShowSecondMenu:h,isShowThirdMenu:p,thirdCenter:i,firstMenuClick:M,secondMenuClick:C,selectClick:e,refreshStatus:n,initMenu:t,menuLevel1:o,menuLevel2:c,menuLevel3:k}=Z();return G(()=>{const{num:L=5,hide:f="false",direction:s="row",thirdDirection:w="row",single:y="false"}=d.query;r.value=s==="column",u.value=w==="column",_.value=f==="true",t(typeof L=="string"?parseInt(L):5,!0)}),(L,f)=>(x(),g("div",{class:b(["flex h-full w-full",a(r)?"flex-col":"flex-row"])},[F(N,{name:"fade"},{default:H(()=>[A(I("div",{class:b(["bg-[#324868] flex gap-1 text-white border-solid border-[#e4e4e4]",a(r)?"flex-row justify-center border-b":"flex-col border-r"])},[(x(!0),g(D,null,T(a(o),s=>(x(),g("div",{key:s.menuId,onClick:w=>a(M)(s),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},S(s.menuName),9,ee))),128))],2),[[B,a(v)]])]),_:1}),F(N,{name:"fade"},{default:H(()=>[I("div",{class:b(["bg-[#e2e0df] flex gap-1 text-black border-solid border-[#e4e4e4]",a(r)?"flex-row justify-center border-b":"flex-col border-r"])},[(x(!0),g(D,null,T(a(c),s=>(x(),g("div",{key:s.menuId,onClick:w=>a(C)(s),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},S(s.menuName),9,ne))),128))],2)]),_:1}),F(N,{name:"fade"},{default:H(()=>[A(I("div",{class:b(["flex-1 bg-[#ffffff] flex gap-1 text-black overflow-auto",a(i)])},[(x(!0),g(D,null,T(a(k),s=>(x(),g("div",{key:s.menuId,class:b(["flex items-center gap-1",a(u)?"flex-col":"flex-row"])},[I("span",te,S(s.menuName),1),I("div",{class:b(["flex gap-1",a(u)?"flex-col":"flex-row"])},[(x(!0),g(D,null,T(s.children,w=>(x(),g("div",{key:w.menuId,onClick:y=>a(e)(w),class:"w-32 min-w-max rounded-sm py-2 px-2"},S(w.menuName),9,se))),128))],2)],2))),128))],2),[[B,a(p)]])]),_:1})],2))}});const fe=O(oe,[["__scopeId","data-v-8a1031df"]]);export{fe as default};
