import{r as o,z as q,N as j,d as z,A as G,B as J,o as p,l as w,e as N,w as R,T as B,C as I,q as i,b as A,v as F,m as y,F as D,p as T,D as S}from"./index-61ba2327.js";import"./el-button-f35174eb.js";import{E as O}from"./el-overlay-ac1b674d.js";import"./el-input-d5755504.js";import{a as V}from"./axios-7dab5cac.js";import{_ as U}from"./plugin-vueexport-helper-c27b6911.js";import"./typescript-aab6c78f.js";const K=""+new URL("stringData-4f6bc0b1.png",import.meta.url).href;function Q(){const d=o([]),f=o([]);async function M(){const{data:e}=await V.get(K);return e.split(/\n/).filter(s=>s.trim()!=="")}async function c(){return(await M()).map((t,s)=>({menuName:t,menuId:t+(s+1)}))}function l(e,t=5,{onlySingle:s}={}){e=JSON.parse(JSON.stringify(e));const a=[];for(;t>0;){if(e.length<=0)throw new Error("菜单剩余不足,取不到了");const r=Math.floor(Math.random()*e.length);a.find(v=>v.menuId===e[r].menuId)?t++:(a.push(e[r]),e=e.filter(v=>v.menuId!==e[r].menuId),t--)}return s&&_(e,a),a}function x(e,t){return e.reduce((s,a)=>(t.find(r=>r.menuId===a.menuId)||s.push(a),s),[])}function _(e,t){f.value=x(e,t)}const m=o([]);function g(e){const t=l(d.value,e);console.log("🚀 ~ file: useProcessDataHook.js:83 ~ initMenu ~ menuLevel1:",t),m.value=k(t,e)}function k(e,t){return e.map(s=>(s.children=l(d.value,t).map(a=>(a.parentId=s.menuId,a)),s.children.map(a=>{a.children=l(d.value,t).map(r=>(r.parentId=a.menuId,r))}),s)),e}function C(e,{parentList:t,onlySingle:s}={}){return t?t.reduce((a,r)=>{const v=l(f.value,e,{onlySingle:s}).map(h=>(h.parentId=r.menuId,h));return a.concat(v)},[]):l(f.value,e,{onlySingle:s})}return{allMenu:d,remainMenu:f,mapData:c,getRandomData:l,changeRemainMenu:_,menuTree:m,initMenu:g,createLevelDataList:C}}const{allMenu:E,remainMenu:P,mapData:W,getRandomData:X,changeRemainMenu:fe,menuTree:de,initMenu:me,createLevelDataList:H}=Q();function Y(){const d=o(!1),f=o(!1),M=o(!1),c=o(!0),l=o(!1),x=o(!1),_=o([]),m=o([]),g=o([]),k=o([]),C=o([]),e=o([]);async function t(n=5,u=!1){j.start(),E.value=await W(),P.value=E.value,_.value=H(n),k.value=_.value,m.value=H(n,{parentList:_.value,onlySingle:u}),console.log("🚀 ~ file: menuHook.ts:46 ~ initMenu ~ menuLevel2List.value:",m.value);const b=H(n,{parentList:m.value,onlySingle:u});g.value=b.map($=>($.children=X(P.value,n),$)),j.done(),console.log("🚀 ~ file: menuHook.ts:51 ~ initMenu ~ menuLevel3List.value:",g.value)}const s=q(()=>M.value?`flex-row ${f.value?"justify-center ":"justify-start"}`:`flex-col ${f.value?"items-center  pl-36":"items-start"}`),a=new Date,r=n=>{console.log("一级菜单点击"),d.value&&(c.value=!1),l.value=!0,x.value=!1,C.value=m.value.filter(u=>u.parentId===n.menuId)},v=n=>{d.value&&(c.value=!1,l.value=!1),x.value=!0,e.value=g.value.filter(u=>u.parentId===n.menuId),console.log("🚀 ~ file: menuHook.ts:90 ~ secondMenuClick ~ menuLevel3.value:",e.value)},h=n=>{console.log("选中:",n);const b=(new Date().getTime()-a.getTime())/1e3;O.alert(`用时: ${b}秒`,"提示",{confirmButtonText:"确定",callback:()=>{L()}})},L=()=>{c.value=!0,l.value=!1,x.value=!1};return{isHide:d,isGlobalColumn:f,isThirdColumn:M,isShowFirstMenu:c,isShowSecondMenu:l,isShowThirdMenu:x,thirdCenter:s,firstMenuClick:r,secondMenuClick:v,selectClick:h,refreshStatus:L,initMenu:t,menuLevel1:k,menuLevel2:C,menuLevel3:e}}const Z=["onClick"],ee=["onClick"],ne={class:"font-bold w-32 rounded-sm py-2 px-2"},te=["onClick"],se=z({__name:"menu",setup(d){const f=G(),{isHide:M,isGlobalColumn:c,isThirdColumn:l,isShowFirstMenu:x,isShowSecondMenu:_,isShowThirdMenu:m,thirdCenter:g,firstMenuClick:k,secondMenuClick:C,selectClick:e,refreshStatus:t,initMenu:s,menuLevel1:a,menuLevel2:r,menuLevel3:v}=Y();return J(()=>{const{num:h=5,hide:L="false",direction:n="row",thirdDirection:u="row",single:b="false"}=f.query;c.value=n==="column",l.value=u==="column",M.value=L==="true",s(typeof h=="string"?parseInt(h):5,!0)}),(h,L)=>(p(),w("div",{class:I(["flex h-full w-full",i(c)?"flex-col":"flex-row"])},[N(B,{name:"fade"},{default:R(()=>[A(y("div",{class:I(["bg-[#324868] flex gap-1 text-white border-r border-solid border-[#e4e4e4]",i(c)?"flex-row justify-center":"flex-col"])},[(p(!0),w(D,null,T(i(a),n=>(p(),w("div",{key:n.menuId,onClick:u=>i(k)(n),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},S(n.menuName),9,Z))),128))],2),[[F,i(x)]])]),_:1}),N(B,{name:"fade"},{default:R(()=>[y("div",{class:I(["bg-[#e2e0df] flex gap-1 text-black border-r border-solid border-[#e4e4e4]",i(c)?"flex-row justify-center":"flex-col"])},[(p(!0),w(D,null,T(i(r),n=>(p(),w("div",{key:n.menuId,onClick:u=>i(C)(n),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},S(n.menuName),9,ee))),128))],2)]),_:1}),N(B,{name:"fade"},{default:R(()=>[A(y("div",{class:I(["flex-1 bg-[#ffffff] flex gap-1 text-black overflow-auto",i(g)])},[(p(!0),w(D,null,T(i(v),n=>(p(),w("div",{key:n.menuId,class:I(["flex items-center gap-1",i(l)?"flex-col":"flex-row"])},[y("span",ne,S(n.menuName),1),y("div",{class:I(["flex gap-1",i(l)?"flex-col":"flex-row"])},[(p(!0),w(D,null,T(n.children,u=>(p(),w("div",{key:u.menuId,onClick:b=>i(e)(u),class:"w-32 min-w-max rounded-sm py-2 px-2"},S(u.menuName),9,te))),128))],2)],2))),128))],2),[[F,i(m)]])]),_:1})],2))}});const ve=U(se,[["__scopeId","data-v-9a29d891"]]);export{ve as default};
