import{a as T}from"./axios-72013d42.js";import{r as a,W as A,z as b,Y as k}from"./index-8ec7d654.js";const j=""+new URL("stringData-4f6bc0b1.png",import.meta.url).href;function P(){const v=a([]),r=a([]);async function M(){const{data:e}=await T.get(j);return e.split(/\n/).filter(t=>t.trim()!=="")}async function L(){return(await M()).map((n,t)=>({menuName:n,menuId:n+(t+1)}))}function o(e,n=5,{onlySingle:t}={}){e=JSON.parse(JSON.stringify(e));const u=[];for(;n>0;){if(e.length<=0)throw new Error("菜单剩余不足,取不到了");const s=Math.floor(Math.random()*e.length);u.find(m=>m.menuId===e[s].menuId)?n++:(u.push(e[s]),e=e.filter(m=>m.menuId!==e[s].menuId),n--)}return t&&c(e,u),u}function g(e,n){return e.reduce((t,u)=>(n.find(s=>s.menuId===u.menuId)||t.push(u),t),[])}function c(e,n){r.value=g(e,n)}const i=a([]);function f(e){const n=o(v.value,e);console.log("🚀 ~ file: useProcessDataHook.js:83 ~ initMenu ~ menuLevel1:",n),i.value=d(n,e)}function d(e,n){return e.map(t=>(t.children=o(v.value,n).map(u=>(u.parentId=t.menuId,u)),t.children.map(u=>{u.children=o(v.value,n).map(s=>(s.parentId=u.menuId,s))}),t)),e}function h(e,{parentList:n,onlySingle:t}={}){return n?n.reduce((u,s)=>{const m=o(r.value,e,{onlySingle:t}).map(I=>(I.parentId=s.menuId,I));return u.concat(m)},[]):o(r.value,e,{onlySingle:t})}return{allMenu:v,remainMenu:r,mapData:L,getRandomData:o,changeRemainMenu:c,menuTree:i,initMenu:f,createLevelDataList:h}}const{allMenu:C,remainMenu:R,mapData:F,getRandomData:J,changeRemainMenu:$,menuTree:y,initMenu:z,createLevelDataList:w}=P();function E(){const v=A(),r=a(!1),M=a(!1),L=a(!1),o=a(!0),g=a(!1),c=a(!1),i=a([]),f=a([]),d=a([]),h=a([]),e=a([]),n=a([]);async function t(l=5,p=!1){k.start(),C.value=await F(),R.value=C.value,i.value=w(l),console.log("🚀 ~ file: menuHook.ts:47 ~ initMenu ~ menuLevel1List.value:",i.value),h.value=i.value,f.value=w(l,{parentList:i.value,onlySingle:p}),console.log("🚀 ~ file: menuHook.ts:46 ~ initMenu ~ menuLevel2List.value:",f.value);const x=w(l,{parentList:f.value,onlySingle:p});d.value=x.map(D=>(D.children=J(R.value,l),D)),k.done(),console.log("🚀 ~ file: menuHook.ts:51 ~ initMenu ~ menuLevel3List.value:",d.value)}const u=b(()=>L.value?`flex-row ${M.value?"justify-center ":"justify-start"}`:`flex-col ${M.value?"items-center  pl-36":"items-start"}`),s=l=>{console.log("一级菜单点击"),r.value&&(o.value=!1),g.value=!0,c.value=!1,e.value=f.value.filter(p=>p.parentId===l.menuId)},m=l=>{r.value&&(o.value=!1),c.value=!0,n.value=d.value.filter(p=>p.parentId===l.menuId),console.log("🚀 ~ file: menuHook.ts:90 ~ secondMenuClick ~ menuLevel3.value:",n.value)},I=l=>{console.log("选中:",l)},S=()=>{o.value=!0,g.value=!1,c.value=!1};function H(){v.push("/menu/login"),sessionStorage.removeItem("userName"),sessionStorage.removeItem("answer")}return{isHide:r,isGlobalColumn:M,isThirdColumn:L,isShowFirstMenu:o,isShowSecondMenu:g,isShowThirdMenu:c,thirdCenter:u,firstMenuClick:s,secondMenuClick:m,selectClick:I,refreshStatus:S,initMenu:t,menuLevel1:h,menuLevel2:e,menuLevel3:n,menuLevel1List:i,menuLevel2List:f,menuLevel3List:d,goLogin:H}}export{E as u};
