import{i as x,C as b,m as O,B as N,g as R,a as X,r as G,c as U,x as Y}from"./el-button-00713da7.js";import{G as z,ai as K,a9 as $,g as V,ar as j,I as q,as as J,am as T,d as Q,e as Z,D as A,h as g}from"./index-f135e29b.js";import{t as P}from"./index-23572607.js";let m;const F=e=>{var t;if(!x)return 0;if(m!==void 0)return m;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const i=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const d=s.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),m=i-d,m};var v=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(v||{});const le=(e,t,o,i)=>{let s={offsetX:0,offsetY:0};const d=l=>{const f=l.clientX,E=l.clientY,{offsetX:p,offsetY:y}=s,r=e.value.getBoundingClientRect(),S=r.left,M=r.top,h=r.width,D=r.height,_=document.documentElement.clientWidth,k=document.documentElement.clientHeight,B=-S+p,H=-M+y,I=_-S-h+p,W=k-M-D+y,C=w=>{let c=p+w.clientX-f,a=y+w.clientY-E;i!=null&&i.value||(c=Math.min(Math.max(c,B),I),a=Math.min(Math.max(a,H),W)),s={offsetX:c,offsetY:a},e.value&&(e.value.style.transform=`translate(${b(c)}, ${b(a)})`)},L=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",L)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",L)},n=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",d)},u=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",d)};z(()=>{K(()=>{o.value?n():u()})}),$(()=>{u()})},re=(e,t={})=>{V(e)||P("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||O("popup"),i=j(()=>o.bm("parent","hidden"));if(!x||N(document.body,i.value))return;let s=0,d=!1,n="0";const u=()=>{setTimeout(()=>{G(document==null?void 0:document.body,i.value),d&&document&&(document.body.style.width=n)},200)};q(e,l=>{if(!l){u();return}d=!N(document.body,i.value),d&&(n=document.body.style.width),s=F(o.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,E=R(document.body,"overflowY");s>0&&(f||E==="scroll")&&d&&(document.body.style.width=`calc(100% - ${s}px)`),X(document.body,i.value)}),J(()=>u())},ee=e=>{if(!e)return{onClick:T,onMousedown:T,onMouseup:T};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:n=>{t=n.target===n.currentTarget},onMouseup:n=>{o=n.target===n.currentTarget}}},oe=U({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Y([String,Array,Object])},zIndex:{type:Y([String,Number])}}),te={click:e=>e instanceof MouseEvent},ne="overlay";var se=Q({name:"ElOverlay",props:oe,emits:te,setup(e,{slots:t,emit:o}){const i=O(ne),s=l=>{o("click",l)},{onClick:d,onMousedown:n,onMouseup:u}=ee(e.customMaskEvent?void 0:s);return()=>e.mask?Z("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:n,onMouseup:u},[A(t,"default")],v.STYLE|v.CLASS|v.PROPS,["onClick","onMouseup","onMousedown"]):g("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[A(t,"default")])}});const ce=se;export{ce as E,re as a,ee as b,le as u};
