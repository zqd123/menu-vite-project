import{i as A,H as C,k as O,y as b,g as W,a as R,r as X,c as G,s as N}from"./el-button-97a64465.js";import{G as U,aj as z,a9 as K,g as $,as as V,I as j,at as q,an as E,d as J,e as Q,D as Y,h as Z}from"./index-0eda8a59.js";import{t as g}from"./event-125bcb7f.js";let a;const P=e=>{var t;if(!A)return 0;if(a!==void 0)return a;const o=document.createElement("div");o.className=`${e}-scrollbar__wrap`,o.style.visibility="hidden",o.style.width="100px",o.style.position="absolute",o.style.top="-9999px",document.body.appendChild(o);const d=o.offsetWidth;o.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",o.appendChild(s);const i=s.offsetWidth;return(t=o.parentNode)==null||t.removeChild(o),a=d-i,a};var m=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(m||{});const ue=(e,t,o)=>{let d={offsetX:0,offsetY:0};const s=u=>{const r=u.clientX,v=u.clientY,{offsetX:l,offsetY:f}=d,c=e.value.getBoundingClientRect(),p=c.left,y=c.top,x=c.width,h=c.height,D=document.documentElement.clientWidth,_=document.documentElement.clientHeight,k=-p+l,H=-y+f,B=D-p-x+l,I=_-y-h+f,T=M=>{const w=Math.min(Math.max(l+M.clientX-r,k),B),L=Math.min(Math.max(f+M.clientY-v,H),I);d={offsetX:w,offsetY:L},e.value&&(e.value.style.transform=`translate(${C(w)}, ${C(L)})`)},S=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",S)},i=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",s)},n=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",s)};U(()=>{z(()=>{o.value?i():n()})}),K(()=>{n()})},re=(e,t={})=>{$(e)||g("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||O("popup"),d=V(()=>o.bm("parent","hidden"));if(!A||b(document.body,d.value))return;let s=0,i=!1,n="0";const u=()=>{setTimeout(()=>{X(document==null?void 0:document.body,d.value),i&&document&&(document.body.style.width=n)},200)};j(e,r=>{if(!r){u();return}i=!b(document.body,d.value),i&&(n=document.body.style.width),s=P(o.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,l=W(document.body,"overflowY");s>0&&(v||l==="scroll")&&i&&(document.body.style.width=`calc(100% - ${s}px)`),R(document.body,d.value)}),q(()=>u())},F=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:n=>{t=n.target===n.currentTarget},onMouseup:n=>{o=n.target===n.currentTarget}}},ee=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:N([String,Array,Object])},zIndex:{type:N([String,Number])}}),oe={click:e=>e instanceof MouseEvent},te="overlay";var ne=J({name:"ElOverlay",props:ee,emits:oe,setup(e,{slots:t,emit:o}){const d=O(te),s=r=>{o("click",r)},{onClick:i,onMousedown:n,onMouseup:u}=F(e.customMaskEvent?void 0:s);return()=>e.mask?Q("div",{class:[d.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:n,onMouseup:u},[Y(t,"default")],m.STYLE|m.CLASS|m.PROPS,["onClick","onMouseup","onMousedown"]):Z("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Y(t,"default")])}});const le=ne;export{le as E,re as a,F as b,ue as u};
