import{r,z,N as A,d as G,A as J,o as _,l as b,e as B,w as F,T as R,B as y,q as c,b as $,v as Q,m as D,F as T,p as O,C as H}from"./index-3ee92419.js";import{a as V}from"./axios-28bc18a3.js";import{_ as U}from"./plugin-vueexport-helper-c27b6911.js";const K=""+new URL("stringData-4f6bc0b1.png",import.meta.url).href;function W(){const f=r([]),m=r([]);async function g(){const{data:e}=await V.get(K);return e.split(/\n/).filter(n=>n.trim()!=="")}async function d(){return(await g()).map((t,n)=>({menuName:t,menuId:t+(n+1)}))}function u(e,t=5,{onlySingle:n}={}){e=JSON.parse(JSON.stringify(e));const s=[];for(;t>0;){if(e.length<=0)throw new Error("菜单剩余不足,取不到了");const o=Math.floor(Math.random()*e.length);s.find(a=>a.menuId===e[o].menuId)?t++:(s.push(e[o]),e=e.filter(a=>a.menuId!==e[o].menuId),t--)}return n&&p(e,s),s}function v(e,t){return e.reduce((n,s)=>(t.find(o=>o.menuId===s.menuId)||n.push(s),n),[])}function p(e,t){m.value=v(e,t)}const h=r([]);function w(e){const t=u(f.value,e);console.log("🚀 ~ file: useProcessDataHook.js:83 ~ initMenu ~ menuLevel1:",t),h.value=k(t,e)}function k(e,t){return e.map(n=>(n.children=u(f.value,t).map(s=>(s.parentId=n.menuId,s)),n.children.map(s=>{s.children=u(f.value,t).map(o=>(o.parentId=s.menuId,o))}),n)),e}function l(e,{parentList:t,onlySingle:n}={}){return t?t.reduce((s,o)=>{const a=u(m.value,e,{onlySingle:n}).map(M=>(M.parentId=o.menuId,M));return s.concat(a)},[]):u(m.value,e,{onlySingle:n})}return{allMenu:f,remainMenu:m,mapData:d,getRandomData:u,changeRemainMenu:p,menuTree:h,initMenu:w,createLevelDataList:l}}const{allMenu:P,remainMenu:q,mapData:X,getRandomData:Y,changeRemainMenu:fe,menuTree:me,initMenu:de,createLevelDataList:E}=W();function Z(){const f=r(!1),m=r(!1),g=r(!1),d=r(!0),u=r(!1),v=r(!1),p=r([]),h=r([]),w=r([]),k=r([]),l=r([]),e=r([]);async function t(i=5,L=!1){A.start(),P.value=await X(),q.value=P.value,p.value=E(i),console.log("🚀 ~ file: menuHook.ts:47 ~ initMenu ~ menuLevel1List.value:",p.value),k.value=p.value,h.value=E(i,{parentList:p.value,onlySingle:L}),console.log("🚀 ~ file: menuHook.ts:46 ~ initMenu ~ menuLevel2List.value:",h.value);const C=E(i,{parentList:h.value,onlySingle:L});w.value=C.map(N=>(N.children=Y(q.value,i),N)),A.done(),console.log("🚀 ~ file: menuHook.ts:51 ~ initMenu ~ menuLevel3List.value:",w.value)}const n=z(()=>g.value?`flex-row ${m.value?"justify-center ":"justify-start"}`:`flex-col ${m.value?"items-center  pl-36":"items-start"}`);return{isHide:f,isGlobalColumn:m,isThirdColumn:g,isShowFirstMenu:d,isShowSecondMenu:u,isShowThirdMenu:v,thirdCenter:n,firstMenuClick:i=>{console.log("一级菜单点击"),f.value&&(d.value=!1),u.value=!0,v.value=!1,l.value=h.value.filter(L=>L.parentId===i.menuId)},secondMenuClick:i=>{f.value&&(d.value=!1,u.value=!1),v.value=!0,e.value=w.value.filter(L=>L.parentId===i.menuId),console.log("🚀 ~ file: menuHook.ts:90 ~ secondMenuClick ~ menuLevel3.value:",e.value)},selectClick:i=>{console.log("选中:",i)},refreshStatus:()=>{d.value=!0,u.value=!1,v.value=!1},initMenu:t,menuLevel1:k,menuLevel2:l,menuLevel3:e,menuLevel1List:p,menuLevel2List:h,menuLevel3List:w}}function ee(){const f=["column","row"],m=[5,7,9],g=["column","row"],d=[!1,!0];function u(l="column"){const e=[];return f.forEach((t,n)=>{m.forEach((s,o)=>{d.forEach((a,M)=>{e.push({num:s,thirdDirection:t,globDirection:l,isFirstShow:a})})})}),e.forEach((t,n)=>{t.id=n+1}),e}function v(l){return l[Math.floor(Math.random()*l.length)]}function p({level1List:l,level2List:e,level3List:t}){const n=v(l),s=n.menuName,o=e.filter(I=>I.parentId===n.menuId),a=v(o),M=a.menuName,i=t.filter(I=>I.parentId===a.menuId),L=v(i),C=L.menuName,j=v(L.children??[]).menuName;return console.log(s,M,C,j),{level1Name:s,level2Name:M,level3Name:C,level4Name:j}}function h({level1List:l,level2List:e,level3List:t,questionNumber:n}){const s=[];for(let o=0;o<n;o++)s.push(p({level1List:l,level2List:e,level3List:t}));return s}function w({level1List:l,level2List:e,level3List:t,questionNumber:n=100,falsePercent:s=50}){const a=h({level1List:l,level2List:e,level3List:t,questionNumber:n}).length*s/100;console.log("🚀 ~ file: questionHook.ts:100 ~ createQuestionList ~ falseNum:",a)}function k(){const l=[];return m.forEach((e,t)=>{for(let n=0;n<2;n++){const s={num:e,thirdDirection:g[n],globDirection:f[n],isFirstShow:d[n]};l.push(s)}}),l}return{createMenuTypeList:u,createQuestionList:w,generateFirstTypeList:k}}const ne=["onClick"],te=["onClick"],se={class:"font-bold w-32 rounded-sm py-2 px-2"},le=["onClick"],oe=G({__name:"menu",setup(f){J();const{isHide:m,isGlobalColumn:g,isThirdColumn:d,isShowFirstMenu:u,isShowSecondMenu:v,isShowThirdMenu:p,thirdCenter:h,firstMenuClick:w,secondMenuClick:k,selectClick:l,refreshStatus:e,initMenu:t,menuLevel1:n,menuLevel2:s,menuLevel3:o,menuLevel1List:a,menuLevel2List:M,menuLevel3List:i}=Z(),{createMenuTypeList:L,createQuestionList:C}=ee(),N=L();console.log("🚀 ~ file: menu.vue:103 ~ arr:",N);async function j({num:I=5}={}){await t(I),C({level1List:a.value,level2List:M.value,level3List:i.value})}return j({num:5}),(I,ue)=>(_(),b("div",{class:y(["flex h-full w-full",c(g)?"flex-col":"flex-row"])},[B(R,{name:"fade"},{default:F(()=>[$(D("div",{class:y(["bg-[#324868] flex gap-1 text-white border-solid border-[#e4e4e4]",c(g)?"flex-row justify-center border-b":"flex-col border-r"])},[(_(!0),b(T,null,O(c(n),x=>(_(),b("div",{key:x.menuId,onClick:S=>c(w)(x),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},H(x.menuName),9,ne))),128))],2),[[Q,c(u)]])]),_:1}),B(R,{name:"fade"},{default:F(()=>[D("div",{class:y(["bg-[#e2e0df] flex gap-1 text-black border-solid border-[#e4e4e4]",c(g)?"flex-row justify-center border-b":"flex-col border-r"])},[(_(!0),b(T,null,O(c(s),x=>(_(),b("div",{key:x.menuId,onClick:S=>c(k)(x),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},H(x.menuName),9,te))),128))],2)]),_:1}),B(R,{name:"fade"},{default:F(()=>[$(D("div",{class:y(["flex-1 bg-[#ffffff] flex gap-1 text-black overflow-auto",c(h)])},[(_(!0),b(T,null,O(c(o),x=>(_(),b("div",{key:x.menuId,class:y(["flex items-center gap-1",c(d)?"flex-col":"flex-row"])},[D("span",se,H(x.menuName),1),D("div",{class:y(["flex gap-1",c(d)?"flex-col":"flex-row"])},[(_(!0),b(T,null,O(x.children,S=>(_(),b("div",{key:S.menuId,onClick:ae=>c(l)(S),class:"w-32 min-w-max rounded-sm py-2 px-2"},H(S.menuName),9,le))),128))],2)],2))),128))],2),[[Q,c(p)]])]),_:1})],2))}});const ve=U(oe,[["__scopeId","data-v-91c16f55"]]);export{ve as default};
