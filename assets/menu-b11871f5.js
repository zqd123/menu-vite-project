import{r as p,z as U,N as A,d as K,o as I,A as W,w as T,m as D,e as j,x as P,B as $,q as v,C as X,l as q,T as Q,D as H,b as V,v as z,F as B,p as O}from"./index-3e1debba.js";import{a as Y}from"./axios-4757cd06.js";import{E as Z}from"./el-button-8130740a.js";import{E as ee}from"./el-dialog-e9964890.js";import"./el-overlay-ad19c685.js";import{_ as ne}from"./plugin-vueexport-helper-c27b6911.js";import"./event-0e1210c4.js";const te=""+new URL("stringData-4f6bc0b1.png",import.meta.url).href;function oe(){const h=p([]),N=p([]);async function M(){const{data:o}=await Y.get(te);return o.split(/\n/).filter(u=>u.trim()!=="")}async function _(){return(await M()).map((a,u)=>({menuName:a,menuId:a+(u+1)}))}function r(o,a=5,{onlySingle:u}={}){o=JSON.parse(JSON.stringify(o));const e=[];for(;a>0;){if(o.length<=0)throw new Error("菜单剩余不足,取不到了");const t=Math.floor(Math.random()*o.length);e.find(s=>s.menuId===o[t].menuId)?a++:(e.push(o[t]),o=o.filter(s=>s.menuId!==o[t].menuId),a--)}return u&&m(o,e),e}function y(o,a){return o.reduce((u,e)=>(a.find(t=>t.menuId===e.menuId)||u.push(e),u),[])}function m(o,a){N.value=y(o,a)}const L=p([]);function C(o){const a=r(h.value,o);console.log("🚀 ~ file: useProcessDataHook.js:83 ~ initMenu ~ menuLevel1:",a),L.value=x(a,o)}function x(o,a){return o.map(u=>(u.children=r(h.value,a).map(e=>(e.parentId=u.menuId,e)),u.children.map(e=>{e.children=r(h.value,a).map(t=>(t.parentId=e.menuId,t))}),u)),o}function S(o,{parentList:a,onlySingle:u}={}){return a?a.reduce((e,t)=>{const s=r(N.value,o,{onlySingle:u}).map(n=>(n.parentId=t.menuId,n));return e.concat(s)},[]):r(N.value,o,{onlySingle:u})}return{allMenu:h,remainMenu:N,mapData:_,getRandomData:r,changeRemainMenu:m,menuTree:L,initMenu:C,createLevelDataList:S}}const{allMenu:G,remainMenu:J,mapData:se,getRandomData:le,changeRemainMenu:xe,menuTree:we,initMenu:ke,createLevelDataList:F}=oe();function ae(){const h=p(!1),N=p(!1),M=p(!1),_=p(!0),r=p(!1),y=p(!1),m=p([]),L=p([]),C=p([]),x=p([]),S=p([]),o=p([]);async function a(l=5,i=!1){A.start(),G.value=await se(),J.value=G.value,m.value=F(l),console.log("🚀 ~ file: menuHook.ts:47 ~ initMenu ~ menuLevel1List.value:",m.value),x.value=m.value,L.value=F(l,{parentList:m.value,onlySingle:i}),console.log("🚀 ~ file: menuHook.ts:46 ~ initMenu ~ menuLevel2List.value:",L.value);const d=F(l,{parentList:L.value,onlySingle:i});C.value=d.map(c=>(c.children=le(J.value,l),c)),A.done(),console.log("🚀 ~ file: menuHook.ts:51 ~ initMenu ~ menuLevel3List.value:",C.value)}const u=U(()=>M.value?`flex-row ${N.value?"justify-center ":"justify-start"}`:`flex-col ${N.value?"items-center  pl-36":"items-start"}`);return{isHide:h,isGlobalColumn:N,isThirdColumn:M,isShowFirstMenu:_,isShowSecondMenu:r,isShowThirdMenu:y,thirdCenter:u,firstMenuClick:l=>{console.log("一级菜单点击"),h.value&&(_.value=!1),r.value=!0,y.value=!1,S.value=L.value.filter(i=>i.parentId===l.menuId)},secondMenuClick:l=>{h.value&&(_.value=!1,r.value=!1),y.value=!0,o.value=C.value.filter(i=>i.parentId===l.menuId),console.log("🚀 ~ file: menuHook.ts:90 ~ secondMenuClick ~ menuLevel3.value:",o.value)},selectClick:l=>{console.log("选中:",l)},refreshStatus:()=>{_.value=!0,r.value=!1,y.value=!1},initMenu:a,menuLevel1:x,menuLevel2:S,menuLevel3:o,menuLevel1List:m,menuLevel2List:L,menuLevel3List:C}}function ue(){const h=p([]),N=["column","row"],M=[5,7,9],_=["column","row"],r=[!1,!0];function y(e="column"){const t=[];return N.forEach((s,n)=>{M.forEach((l,i)=>{r.forEach((d,c)=>{t.push({num:l,thirdDirection:s,globDirection:e,isFirstShow:d})})})}),t.forEach((s,n)=>{s.id=n+1}),t}function m(e){return e[Math.floor(Math.random()*e.length)]}function L({level1List:e,level2List:t,level3List:s}){const n=m(e),l=n.menuName,i=t.filter(b=>b.parentId===n.menuId),d=m(i),c=d.menuName,w=s.filter(b=>b.parentId===d.menuId),g=m(w),k=g.menuName,f=m(g.children).menuName;return console.log(l,c,k,f),{level1Name:l,level2Name:c,level3Name:k,level4Name:f}}function C({level1List:e,level2List:t,level3List:s,questionNumber:n}){const l=[];for(let i=0;i<n;i++)l.push(L({level1List:e,level2List:t,level3List:s}));return l}function x(e,t){const s=Math.floor(Math.random()*e.length),n=e[s];return n.menuName!==t?n.menuName:x(e,t)}function S(e,t,s,n,l,i){let d=[];i==="type1"?d=["level1Name","level2Name"]:i==="type2"&&(d=["level1Name","level2Name","level3Name","level4Name"]);const c=e.map(g=>({question:g,isTrue:!0})),w=[];for(;w.length<t;){const g=Math.floor(Math.random()*e.length);w.includes(g)||w.push(g)}return c.forEach(g=>{w.forEach(k=>{const E=d[Math.floor(Math.random()*d.length)];if(E==="level1Name")c[k].question.level1Name=x(s,g.question.level1Name);else if(E==="level2Name")c[k].question.level2Name=x(n,g.question.level2Name);else if(E==="level3Name")c[k].question.level3Name=x(l,g.question.level3Name);else if(E==="level4Name"){const f=l.filter(R=>R.menuName!==g.question.level3Name),b=Math.floor(Math.random()*f.length);c[k].question.level4Name=x(f[b].children,g.question.level4Name)}c[k].isTrue=!1})}),c}function o(e,t){const s=[];return t==="type1"?e.forEach(n=>{s.push({questionStr:`该页面中节点${n.question.level1Name}与节点${n.question.level1Name}是否属于父子关系`,isTrue:n.isTrue})}):t==="type2"&&e.forEach(n=>{s.push({questionStr:`该页面中节点${n.question.level1Name}-${n.question.level2Name}-${n.question.level3Name}-${n.question.level4Name}否正确`,isTrue:n.isTrue})}),s}function a({level1List:e,level2List:t,level3List:s,questionNumber:n=20,questionType:l="type1",falsePercent:i=50}){const d=C({level1List:e,level2List:t,level3List:s,questionNumber:n}),c=d.length*i/100;console.log("🚀 ~ file: questionHook.ts:206 ~ useQuestionHook ~ falseNum:",c);const w=S(d,c,e,t,s,l);console.log("🚀 ~ file: questionHook.ts:207 ~ useQuestionHook ~ res:",w),h.value=o(w,l),console.log("🚀 ~ file: questionHook.ts:238 ~ useQuestionHook ~ questionStrList:",h)}function u(){const e=[];return M.forEach((t,s)=>{for(let n=0;n<2;n++){const l={num:t,thirdDirection:_[n],globDirection:N[n],isFirstShow:r[n]};e.push(l)}}),e}return{createMenuTypeList:y,createQuestionList:a,generateFirstTypeList:u,questionStrList:h}}const re={class:"dialog-footer"},ie=K({__name:"QuestionDialog",props:{questionStrList:{}},setup(h){const M=h.questionStrList[0].questionStr;function _(r){console.log(r)}return(r,y)=>{const m=Z,L=ee;return I(),W(L,{"model-value":"",modal:!1,title:"问题",width:"80%",draggable:"",top:"80vh"},{footer:T(()=>[D("span",re,[j(m,{onClick:_},{default:T(()=>[P("Cancel")]),_:1}),j(m,{type:"primary",onClick:_},{default:T(()=>[P(" Confirm ")]),_:1})])]),default:T(()=>[D("span",null,$(v(M)),1)]),_:1})}}}),ce=["onClick"],me=["onClick"],fe={class:"font-bold w-32 rounded-sm py-2 px-2"},de=["onClick"],ve=K({__name:"menu",setup(h){X();const{isHide:N,isGlobalColumn:M,isThirdColumn:_,isShowFirstMenu:r,isShowSecondMenu:y,isShowThirdMenu:m,thirdCenter:L,firstMenuClick:C,secondMenuClick:x,selectClick:S,refreshStatus:o,initMenu:a,menuLevel1:u,menuLevel2:e,menuLevel3:t,menuLevel1List:s,menuLevel2List:n,menuLevel3List:l}=ae(),{createMenuTypeList:i,createQuestionList:d,questionStrList:c}=ue(),w=i();console.log("🚀 ~ file: menu.vue:103 ~ arr:",w);async function g({num:k=5}={}){await a(k),d({level1List:s.value,level2List:n.value,level3List:l.value})}return g({num:5}),(k,E)=>(I(),q("div",{class:H(["flex h-full w-full",v(M)?"flex-col":"flex-row"])},[j(Q,{name:"fade"},{default:T(()=>[V(D("div",{class:H(["bg-[#324868] flex gap-1 text-white border-solid border-[#e4e4e4]",v(M)?"flex-row justify-center border-b":"flex-col border-r"])},[(I(!0),q(B,null,O(v(u),f=>(I(),q("div",{key:f.menuId,onClick:b=>v(C)(f),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},$(f.menuName),9,ce))),128))],2),[[z,v(r)]])]),_:1}),j(Q,{name:"fade"},{default:T(()=>[D("div",{class:H(["bg-[#e2e0df] flex gap-1 text-black border-solid border-[#e4e4e4]",v(M)?"flex-row justify-center border-b":"flex-col border-r"])},[(I(!0),q(B,null,O(v(e),f=>(I(),q("div",{key:f.menuId,onClick:b=>v(x)(f),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},$(f.menuName),9,me))),128))],2)]),_:1}),j(Q,{name:"fade"},{default:T(()=>[V(D("div",{class:H(["flex-1 bg-[#ffffff] flex gap-1 text-black overflow-auto",v(L)])},[(I(!0),q(B,null,O(v(t),f=>(I(),q("div",{key:f.menuId,class:H(["flex items-center gap-1",v(_)?"flex-col":"flex-row"])},[D("span",fe,$(f.menuName),1),D("div",{class:H(["flex gap-1",v(_)?"flex-col":"flex-row"])},[(I(!0),q(B,null,O(f.children,b=>(I(),q("div",{key:b.menuId,onClick:R=>v(S)(b),class:"w-32 min-w-max rounded-sm py-2 px-2"},$(b.menuName),9,de))),128))],2)],2))),128))],2),[[z,v(m)]])]),_:1}),j(ie,{questionStrList:v(c)},null,8,["questionStrList"])],2))}});const be=ne(ve,[["__scopeId","data-v-7b9e00a1"]]);export{be as default};
