import{r as m,z as G,N as A,d as J,A as V,o as _,l as b,e as B,w as E,T as F,B as S,q as v,b as Q,v as $,m as D,F as j,p as H,C as O}from"./index-5489e8a8.js";import{a as K}from"./axios-28bc18a3.js";import{_ as U}from"./plugin-vueexport-helper-c27b6911.js";const W=""+new URL("stringData-4f6bc0b1.png",import.meta.url).href;function X(){const h=m([]),p=m([]);async function N(){const{data:s}=await K.get(W);return s.split(/\n/).filter(n=>n.trim()!=="")}async function M(){return(await N()).map((e,n)=>({menuName:e,menuId:e+(n+1)}))}function c(s,e=5,{onlySingle:n}={}){s=JSON.parse(JSON.stringify(s));const t=[];for(;e>0;){if(s.length<=0)throw new Error("菜单剩余不足,取不到了");const o=Math.floor(Math.random()*s.length);t.find(a=>a.menuId===s[o].menuId)?e++:(t.push(s[o]),s=s.filter(a=>a.menuId!==s[o].menuId),e--)}return n&&L(s,t),t}function g(s,e){return s.reduce((n,t)=>(e.find(o=>o.menuId===t.menuId)||n.push(t),n),[])}function L(s,e){p.value=g(s,e)}const w=m([]);function f(s){const e=c(h.value,s);console.log("🚀 ~ file: useProcessDataHook.js:83 ~ initMenu ~ menuLevel1:",e),w.value=y(e,s)}function y(s,e){return s.map(n=>(n.children=c(h.value,e).map(t=>(t.parentId=n.menuId,t)),n.children.map(t=>{t.children=c(h.value,e).map(o=>(o.parentId=t.menuId,o))}),n)),s}function I(s,{parentList:e,onlySingle:n}={}){return e?e.reduce((t,o)=>{const a=c(p.value,s,{onlySingle:n}).map(d=>(d.parentId=o.menuId,d));return t.concat(a)},[]):c(p.value,s,{onlySingle:n})}return{allMenu:h,remainMenu:p,mapData:M,getRandomData:c,changeRemainMenu:L,menuTree:w,initMenu:f,createLevelDataList:I}}const{allMenu:P,remainMenu:z,mapData:Y,getRandomData:Z,changeRemainMenu:me,menuTree:fe,initMenu:de,createLevelDataList:R}=X();function ee(){const h=m(!1),p=m(!1),N=m(!1),M=m(!0),c=m(!1),g=m(!1),L=m([]),w=m([]),f=m([]),y=m([]),I=m([]),s=m([]);async function e(l=5,u=!1){A.start(),P.value=await Y(),z.value=P.value,L.value=R(l),console.log("🚀 ~ file: menuHook.ts:47 ~ initMenu ~ menuLevel1List.value:",L.value),y.value=L.value,w.value=R(l,{parentList:L.value,onlySingle:u}),console.log("🚀 ~ file: menuHook.ts:46 ~ initMenu ~ menuLevel2List.value:",w.value);const x=R(l,{parentList:w.value,onlySingle:u});f.value=x.map(r=>(r.children=Z(z.value,l),r)),A.done(),console.log("🚀 ~ file: menuHook.ts:51 ~ initMenu ~ menuLevel3List.value:",f.value)}const n=G(()=>N.value?`flex-row ${p.value?"justify-center ":"justify-start"}`:`flex-col ${p.value?"items-center  pl-36":"items-start"}`);return{isHide:h,isGlobalColumn:p,isThirdColumn:N,isShowFirstMenu:M,isShowSecondMenu:c,isShowThirdMenu:g,thirdCenter:n,firstMenuClick:l=>{console.log("一级菜单点击"),h.value&&(M.value=!1),c.value=!0,g.value=!1,I.value=w.value.filter(u=>u.parentId===l.menuId)},secondMenuClick:l=>{h.value&&(M.value=!1,c.value=!1),g.value=!0,s.value=f.value.filter(u=>u.parentId===l.menuId),console.log("🚀 ~ file: menuHook.ts:90 ~ secondMenuClick ~ menuLevel3.value:",s.value)},selectClick:l=>{console.log("选中:",l)},refreshStatus:()=>{M.value=!0,c.value=!1,g.value=!1},initMenu:e,menuLevel1:y,menuLevel2:I,menuLevel3:s,menuLevel1List:L,menuLevel2List:w,menuLevel3List:f}}function ne(){const h=["column","row"],p=[5,7,9],N=["column","row"],M=[!1,!0];function c(e="column"){const n=[];return h.forEach((t,o)=>{p.forEach((a,d)=>{M.forEach((l,u)=>{n.push({num:a,thirdDirection:t,globDirection:e,isFirstShow:l})})})}),n.forEach((t,o)=>{t.id=o+1}),n}function g(e){return e[Math.floor(Math.random()*e.length)]}function L({level1List:e,level2List:n,level3List:t}){const o=g(e),a=o.menuName,d=n.filter(i=>i.parentId===o.menuId),l=g(d),u=l.menuName,x=t.filter(i=>i.parentId===l.menuId),r=g(x),k=r.menuName,q=g(r.children).menuName;return console.log(a,u,k,q),{level1Name:a,level2Name:u,level3Name:k,level4Name:q}}function w({level1List:e,level2List:n,level3List:t,questionNumber:o}){const a=[];for(let d=0;d<o;d++)a.push(L({level1List:e,level2List:n,level3List:t}));return a}function f(e,n){const t=Math.floor(Math.random()*e.length),o=e[t];return o.menuName!==n?o.menuName:f(e,n)}function y(e,n,t,o,a,d){const l=["level1Name","level2Name","level3Name","level4Name"],u=e.map(r=>({question:r,isTrue:!0})),x=[];for(;x.length<n;){const r=Math.floor(Math.random()*e.length);x.includes(r)||x.push(r)}return u.forEach(r=>{x.forEach(k=>{const C=l[Math.floor(Math.random()*l.length)];if(C==="level1Name")u[k].question.level1Name=f(t,r.question.level1Name);else if(C==="level2Name")u[k].question.level2Name=f(o,r.question.level2Name);else if(C==="level3Name")u[k].question.level3Name=f(a,r.question.level3Name);else if(C==="level4Name"){const q=a.filter(T=>T.menuName!==r.question.level3Name),i=Math.floor(Math.random()*q.length);u[k].question.level4Name=f(q[i].children,r.question.level4Name)}u[k].isTrue=!1})}),u}function I({level1List:e,level2List:n,level3List:t,questionNumber:o=20,questionType:a="type1",falsePercent:d=50}){const l=w({level1List:e,level2List:n,level3List:t,questionNumber:o}),u=l.length*d/100;console.log("🚀 ~ file: questionHook.ts:206 ~ useQuestionHook ~ falseNum:",u);const x=y(l,u,e,n,t);console.log("🚀 ~ file: questionHook.ts:207 ~ useQuestionHook ~ res:",x)}function s(){const e=[];return p.forEach((n,t)=>{for(let o=0;o<2;o++){const a={num:n,thirdDirection:N[o],globDirection:h[o],isFirstShow:M[o]};e.push(a)}}),e}return{createMenuTypeList:c,createQuestionList:I,generateFirstTypeList:s}}const te=["onClick"],oe=["onClick"],se={class:"font-bold w-32 rounded-sm py-2 px-2"},le=["onClick"],ue=J({__name:"menu",setup(h){V();const{isHide:p,isGlobalColumn:N,isThirdColumn:M,isShowFirstMenu:c,isShowSecondMenu:g,isShowThirdMenu:L,thirdCenter:w,firstMenuClick:f,secondMenuClick:y,selectClick:I,refreshStatus:s,initMenu:e,menuLevel1:n,menuLevel2:t,menuLevel3:o,menuLevel1List:a,menuLevel2List:d,menuLevel3List:l}=ee(),{createMenuTypeList:u,createQuestionList:x}=ne(),r=u();console.log("🚀 ~ file: menu.vue:103 ~ arr:",r);async function k({num:C=5}={}){await e(C),x({level1List:a.value,level2List:d.value,level3List:l.value})}return k({num:5}),(C,q)=>(_(),b("div",{class:S(["flex h-full w-full",v(N)?"flex-col":"flex-row"])},[B(F,{name:"fade"},{default:E(()=>[Q(D("div",{class:S(["bg-[#324868] flex gap-1 text-white border-solid border-[#e4e4e4]",v(N)?"flex-row justify-center border-b":"flex-col border-r"])},[(_(!0),b(j,null,H(v(n),i=>(_(),b("div",{key:i.menuId,onClick:T=>v(f)(i),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},O(i.menuName),9,te))),128))],2),[[$,v(c)]])]),_:1}),B(F,{name:"fade"},{default:E(()=>[D("div",{class:S(["bg-[#e2e0df] flex gap-1 text-black border-solid border-[#e4e4e4]",v(N)?"flex-row justify-center border-b":"flex-col border-r"])},[(_(!0),b(j,null,H(v(t),i=>(_(),b("div",{key:i.menuId,onClick:T=>v(y)(i),class:"w-32 font-bold min-w-max rounded-sm py-2 px-2"},O(i.menuName),9,oe))),128))],2)]),_:1}),B(F,{name:"fade"},{default:E(()=>[Q(D("div",{class:S(["flex-1 bg-[#ffffff] flex gap-1 text-black overflow-auto",v(w)])},[(_(!0),b(j,null,H(v(o),i=>(_(),b("div",{key:i.menuId,class:S(["flex items-center gap-1",v(M)?"flex-col":"flex-row"])},[D("span",se,O(i.menuName),1),D("div",{class:S(["flex gap-1",v(M)?"flex-col":"flex-row"])},[(_(!0),b(j,null,H(i.children,T=>(_(),b("div",{key:T.menuId,onClick:ae=>v(I)(T),class:"w-32 min-w-max rounded-sm py-2 px-2"},O(T.menuName),9,le))),128))],2)],2))),128))],2),[[$,v(L)]])]),_:1})],2))}});const ve=U(ue,[["__scopeId","data-v-91c16f55"]]);export{ve as default};
